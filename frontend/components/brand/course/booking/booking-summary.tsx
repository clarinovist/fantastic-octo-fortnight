"use client"

import { Badge } from "@/components/ui/badge"
import { Card, CardContent } from "@/components/ui/card"
import { useEffect } from "react"

type BookingSummaryProps = {
  classType: "online" | "offline"
  date: string
  time: string
  timezone: string
  notes: string
}

export function BookingSummary(props: BookingSummaryProps) {
  useEffect(() => {
    // Add CSS animation if not already present
    if (!document.querySelector("#booking-summary-pulse-styles")) {
      const style = document.createElement("style")
      style.id = "booking-summary-pulse-styles"
      style.textContent = `
        @keyframes cardPulse {
          0% {
            box-shadow: 0 0 0 0 rgba(114, 9, 183, 0.7);
          }
          70% {
            box-shadow: 0 0 0 15px rgba(114, 9, 183, 0);
          }
          100% {
            box-shadow: 0 0 0 0 rgba(114, 9, 183, 0);
          }
        }
      `
      document.head.appendChild(style)
    }
  }, [])

  return (
    <div className="space-y-6">
      <h2 className="text-3xl font-bold">BOOKING SUMMARY</h2>

      {/* Animated Wrapper */}
      <div
        className="rounded-[40px] max-w-3xl"
        style={{
          animation: "cardPulse 2s infinite",
        }}
      >
        <Card className="bg-main text-white rounded-[40px] p-8 shadow-lg border-none overflow-hidden">
          <CardContent className="p-0 flex flex-col md:flex-row md:items-start md:justify-between gap-6 relative">
            {/* Left Section */}
            <div className="flex flex-col gap-4 relative">
              <Badge
                variant="secondary"
                className="bg-[#006312] border-3 border-white text-white text-lg px-6 py-3 rounded-full w-fit flex items-center gap-2 relative z-10"
              >
                {props.classType === "online" ? (
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="16"
                    height="14"
                    viewBox="0 0 16 14"
                    fill="none"
                  >
                    <path
                      d="M12.8538 0.847928C12.6602 0.863501 12.4752 0.936953 12.3214 1.05932C12.1675 1.18168 12.0515 1.34767 11.9874 1.53701C11.9234 1.72635 11.9141 1.93086 11.9607 2.12557C12.0073 2.32027 12.1077 2.49676 12.2498 2.63347C12.8058 3.20658 13.2466 3.88757 13.5469 4.63727C13.8473 5.38698 14.0011 6.19061 13.9997 7.00195C14.0008 7.81324 13.8467 8.61676 13.5464 9.36641C13.2461 10.1161 12.8055 10.7971 12.2498 11.3704C12.1533 11.4657 12.0761 11.5799 12.0229 11.7064C11.9697 11.8329 11.9415 11.9691 11.9399 12.107C11.9384 12.2449 11.9635 12.3818 12.0139 12.5095C12.0643 12.6372 12.1389 12.7532 12.2333 12.8507C12.3277 12.9483 12.4401 13.0253 12.5637 13.0774C12.6874 13.1294 12.8198 13.1554 12.9533 13.1538C13.0869 13.1522 13.2187 13.1231 13.3412 13.0681C13.4636 13.0132 13.5742 12.9335 13.6664 12.8337C15.1608 11.2854 16 9.18828 16 7.00195C16 4.81562 15.1608 2.71848 13.6664 1.17019C13.575 1.07039 13.4653 0.99042 13.3436 0.934966C13.2219 0.879512 13.0908 0.849688 12.9578 0.847239C12.9231 0.845842 12.8884 0.845842 12.8538 0.847239V0.847928ZM2.91689 0.868586C2.69528 0.898945 2.48991 1.00513 2.33358 1.17019C0.839173 2.71848 0 4.81562 0 7.00195C0 9.18828 0.839173 11.2854 2.33358 12.8337C2.4258 12.9335 2.53638 13.0132 2.65884 13.0681C2.78129 13.1231 2.91315 13.1522 3.04666 13.1538C3.18017 13.1554 3.31264 13.1294 3.43629 13.0774C3.55994 13.0253 3.67227 12.9483 3.76668 12.8507C3.86109 12.7532 3.93568 12.6372 3.98607 12.5095C4.03645 12.3818 4.06162 12.2449 4.06008 12.107C4.05854 11.9691 4.03034 11.8329 3.97712 11.7064C3.9239 11.5799 3.84675 11.4657 3.75019 11.3704C3.1942 10.7973 2.75338 10.1163 2.45306 9.36663C2.15275 8.61693 1.99886 7.8133 2.00026 7.00195C1.99923 6.19066 2.15328 5.38714 2.45357 4.63749C2.75387 3.88784 3.1945 3.20681 3.75019 2.63347C3.90135 2.48183 4.00227 2.28475 4.03856 2.07035C4.07484 1.85594 4.04463 1.63518 3.95223 1.43957C3.85984 1.24395 3.70998 1.08349 3.52405 0.981073C3.33812 0.878659 3.12563 0.838843 2.91689 0.868586ZM5.45878 3.14992C5.23953 3.17427 5.03422 3.2728 4.8748 3.43018C4.39057 3.88126 4.00323 4.43217 3.73776 5.04737C3.4723 5.66257 3.33459 6.32841 3.33354 7.00195C3.33354 8.41221 3.91351 9.69438 4.85414 10.5744C4.95131 10.6662 5.06504 10.7374 5.18884 10.7838C5.31264 10.8303 5.44408 10.851 5.57565 10.845C5.70723 10.839 5.83636 10.8062 5.95568 10.7486C6.075 10.691 6.18217 10.6097 6.27108 10.5093C6.35998 10.409 6.42887 10.2915 6.47381 10.1636C6.51876 10.0357 6.53888 9.89996 6.53303 9.76405C6.52718 9.62814 6.49548 9.49475 6.43972 9.3715C6.38396 9.24825 6.30525 9.13755 6.20808 9.04572C5.93149 8.78763 5.71065 8.47224 5.55996 8.12009C5.40926 7.76795 5.33208 7.38696 5.33345 7.00195C5.33207 6.61678 5.40931 6.23562 5.56012 5.88335C5.71094 5.53108 5.93195 5.2156 6.20874 4.9575C6.3685 4.81394 6.48002 4.62169 6.52722 4.40847C6.57442 4.19525 6.55488 3.97205 6.4714 3.77103C6.38793 3.57002 6.24483 3.40156 6.06273 3.28994C5.88062 3.17832 5.66959 3.12929 5.45878 3.14992ZM10.3959 3.14992C10.1976 3.16121 10.007 3.23325 9.84849 3.35686C9.68997 3.48046 9.57067 3.65002 9.50581 3.84393C9.44095 4.03784 9.43346 4.24731 9.48429 4.44563C9.53513 4.64396 9.64199 4.82215 9.79125 4.9575C10.068 5.2156 10.2891 5.53108 10.4399 5.88335C10.5907 6.23562 10.6679 6.61678 10.6665 7.00195C10.6679 7.38713 10.5907 7.76828 10.4399 8.12055C10.2891 8.47283 10.068 8.7883 9.79125 9.04641C9.67983 9.13237 9.587 9.24138 9.51867 9.3665C9.45035 9.49161 9.40804 9.63007 9.39445 9.77303C9.38086 9.91599 9.39628 10.0603 9.43974 10.1968C9.4832 10.3332 9.55373 10.4588 9.64684 10.5655C9.73994 10.6722 9.85357 10.7577 9.98046 10.8165C10.1074 10.8752 10.2447 10.906 10.3838 10.9069C10.5228 10.9077 10.6605 10.8786 10.7881 10.8213C10.9156 10.7641 11.0302 10.68 11.1245 10.5744C11.609 10.1233 11.9965 9.57233 12.2621 8.957C12.5277 8.34167 12.6654 7.67567 12.6665 7.00195C12.6689 6.32975 12.5349 5.66449 12.273 5.04914C12.011 4.43378 11.6271 3.88202 11.1459 3.42949C11.0461 3.33225 10.928 3.25725 10.799 3.20916C10.67 3.16106 10.5328 3.1409 10.3959 3.14992ZM8 5.75421C7.76112 5.75434 7.52764 5.82764 7.32908 5.96483C7.13052 6.10201 6.9758 6.29693 6.88448 6.52494C6.79315 6.75295 6.76933 7.0038 6.81601 7.2458C6.86269 7.48779 6.97779 7.71005 7.14675 7.88448C7.31571 8.05892 7.53095 8.17768 7.76525 8.22577C7.99955 8.27386 8.2424 8.24911 8.46308 8.15465C8.68377 8.06019 8.87238 7.90027 9.00508 7.69509C9.13778 7.48992 9.20861 7.2487 9.20861 7.00195C9.20888 6.83793 9.17779 6.67547 9.11715 6.52388C9.0565 6.37229 8.96749 6.23455 8.85521 6.11857C8.74292 6.00259 8.60958 5.91064 8.46283 5.848C8.31607 5.78535 8.15879 5.75394 8 5.75421Z"
                      fill="white"
                    />
                  </svg>
                ) : (
                  <svg
                    xmlns="http://www.w3.org/2000/svg"
                    width="13"
                    height="16"
                    viewBox="0 0 13 16"
                    fill="none"
                  >
                    <path
                      fillRule="evenodd"
                      clip-rule="evenodd"
                      d="M6.08258 15.7825C6.08258 15.7825 0.333496 10.9883 0.333496 6.27097C0.333496 4.60781 1.00076 3.01276 2.18849 1.83673C3.37622 0.66069 4.98712 0 6.66683 0C8.34653 0 9.95744 0.66069 11.1452 1.83673C12.3329 3.01276 13.0002 4.60781 13.0002 6.27097C13.0002 10.9883 7.25108 15.7825 7.25108 15.7825C6.93125 16.0741 6.40479 16.0709 6.08258 15.7825ZM6.66683 9.01452C7.0307 9.01452 7.39101 8.94356 7.72718 8.80568C8.06335 8.66781 8.36881 8.46572 8.6261 8.21096C8.8834 7.95619 9.0875 7.65375 9.22675 7.32089C9.36599 6.98802 9.43766 6.63126 9.43766 6.27097C9.43766 5.91069 9.36599 5.55393 9.22675 5.22106C9.0875 4.8882 8.8834 4.58575 8.6261 4.33099C8.36881 4.07623 8.06335 3.87414 7.72718 3.73626C7.39101 3.59839 7.0307 3.52742 6.66683 3.52742C5.93196 3.52742 5.22719 3.81647 4.70755 4.33099C4.18792 4.84551 3.896 5.54334 3.896 6.27097C3.896 6.99861 4.18792 7.69644 4.70755 8.21096C5.22719 8.72547 5.93196 9.01452 6.66683 9.01452Z"
                      fill="white"
                    />
                  </svg>
                )}
                <span className="uppercase">{props.classType}</span>
              </Badge>

              {/* Date & Time */}
              <div>
                <h3 className="text-3xl font-bold leading-tight">{props.date}</h3>
                <p className="text-xl font-semibold mt-2">
                  {props.time} {props.timezone}
                </p>
              </div>
            </div>

            {/* Right Section */}
            {props.notes && (
              <div className="relative flex flex-col">
                {/* Note Box */}
                <p className="text-xl font-semibold mb-2">Note:</p>
                <div className="bg-white text-black rounded-2xl p-6 md:w-md relative z-10">
                  <p className="text-lg leading-relaxed whitespace-pre-wrap">{props.notes}</p>
                </div>
              </div>
            )}
          </CardContent>
        </Card>
      </div>
    </div>
  )
}
